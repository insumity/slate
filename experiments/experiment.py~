#!/usr/bin/python3.4
import sys
import string

input_programs_file = sys.argv[1]
glibc_build_directory = sys.argv[2]

none_policy_scheduler_file = sys.argv[3]
slate_scheduler_file = sys.argv[4]

def to_slate_scheduler(policy, program):
    link_script_file = "./testapp.sh"
    return policy + " " + link_script_file + " " + glibc_build_directory + " " + str.join(' ', program)

def to_none_policy_scheduler(policy, program):
    return "MCTOP_ALLOC_NONE" + " " + str.join(' ', program)

def to_linux_scheduler(policy, program):
    return "time program"


def create_scheduler_file(to_scheduler_function, file_name):
    f = open(file_name, 'w')
    with open(input_programs_file) as opf:
        for line in opf:
            line = line.strip('\n')
            words = line.split(' ')
            policy = words[0]
            program = words[1:]
            f.write(to_scheduler_function(policy, program))
    f.close()

create_scheduler_file(to_none_policy_scheduler, none_policy_scheduler_file)
create_scheduler_file(to_slate_scheduler, slate_scheduler_file)

